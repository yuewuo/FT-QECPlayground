(function(t){function e(e){for(var r,i,o=e[0],h=e[1],c=e[2],_=0,u=[];_<o.length;_++)i=o[_],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(t[r]=h[r]);l&&l(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],r=!0,o=1;o<s.length;o++){var h=s[o];0!==n[h]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var r={},n={app:0},a=[];function i(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=r,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/FT-QECPlayground/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=h;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("64a9")},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("FaultTolerantView",{ref:"ft_view",staticClass:"main-qubits",attrs:{panelWidth:480,L:t.L,T:t.T,showDataQubit:t.show_data_qubit,showXAncilla:t.show_X_ancilla,showZAncilla:t.show_Z_ancilla,showVerticalLine:t.show_vertical_line,showInitialization:t.show_initialization,showCXGates:t.show_CX_gates,showXEdges:t.show_X_edges,showZEdges:t.show_Z_edges,useRotated:t.use_rotated,depolarErrorRate:.001,usePerspectiveCamera:t.use_perspective_camera,enableStats:t.enableStats,websiteRoot:t.websiteRoot}}),s("div",{staticClass:"control-panel no-scrollbar"},[t._m(0),s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("Display Settings")])]),s("div",{staticStyle:{position:"relative"}},[s("div",[t._v("\n\t\t\t\t\tCode Distance:\n\t\t\t\t\t"),s("el-input-number",{attrs:{min:3},model:{value:t.bufferedL,callback:function(e){t.bufferedL=e},expression:"bufferedL"}})],1),s("div",{staticStyle:{height:"20px"}}),s("div",[t._v("\n\t\t\t\t\tMeasurement Round:\n\t\t\t\t\t"),s("el-input-number",{attrs:{min:1},model:{value:t.T,callback:function(e){t.T=e},expression:"T"}})],1),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Rotated Planar Code","inactive-text":"Standard Planar Code"},model:{value:t.use_rotated,callback:function(e){t.use_rotated=e},expression:"use_rotated"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Perspective Camera","inactive-text":"Orthogonal Camera"},model:{value:t.use_perspective_camera,callback:function(e){t.use_perspective_camera=e},expression:"use_perspective_camera"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show Data Qubits","inactive-text":"Hide"},model:{value:t.show_data_qubit,callback:function(e){t.show_data_qubit=e},expression:"show_data_qubit"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show Z Stabilizers","inactive-text":"Hide"},model:{value:t.show_Z_ancilla,callback:function(e){t.show_Z_ancilla=e},expression:"show_Z_ancilla"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show X Stabilizers","inactive-text":"Hide"},model:{value:t.show_X_ancilla,callback:function(e){t.show_X_ancilla=e},expression:"show_X_ancilla"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show Vertical Lines","inactive-text":"Hide"},model:{value:t.show_vertical_line,callback:function(e){t.show_vertical_line=e},expression:"show_vertical_line"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show Initialization","inactive-text":"Hide"},model:{value:t.show_initialization,callback:function(e){t.show_initialization=e},expression:"show_initialization"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show CX (CNOT) Gates","inactive-text":"Hide"},model:{value:t.show_CX_gates,callback:function(e){t.show_CX_gates=e},expression:"show_CX_gates"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show Z Graph Lattice","inactive-text":"Hide"},model:{value:t.show_Z_edges,callback:function(e){t.show_Z_edges=e},expression:"show_Z_edges"}}),s("div",{staticStyle:{height:"20px"}}),s("el-switch",{attrs:{"active-text":"Show X Graph Lattice","inactive-text":"Hide"},model:{value:t.show_X_edges,callback:function(e){t.show_X_edges=e},expression:"show_X_edges"}})],1)]),s("div",{staticStyle:{height:"10px"}}),s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("Random Error Generator (I + p"),s("sub",[t._v("X")]),t._v("X + p"),s("sub",[t._v("Z")]),t._v("Z + p"),s("sub",[t._v("Y")]),t._v("Y)")])]),s("div",{staticStyle:{position:"relative"}},[s("div",[s("div",{staticClass:"probability"},[t._v("p"),s("sub",[t._v("X")])]),s("el-input",{staticStyle:{width:"90px"},attrs:{placeholder:"0"},model:{value:t.error_rate_x,callback:function(e){t.error_rate_x=e},expression:"error_rate_x"}}),s("div",{staticClass:"probability"},[t._v("p"),s("sub",[t._v("Z")])]),s("el-input",{staticStyle:{width:"90px"},attrs:{placeholder:"0"},model:{value:t.error_rate_z,callback:function(e){t.error_rate_z=e},expression:"error_rate_z"}}),s("div",{staticClass:"probability"},[t._v("p"),s("sub",[t._v("Y")])]),s("el-input",{staticStyle:{width:"90px"},attrs:{placeholder:"0"},model:{value:t.error_rate_y,callback:function(e){t.error_rate_y=e},expression:"error_rate_y"}})],1),s("div",{staticStyle:{height:"20px"}}),s("el-button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:t.generate_random_error}},[t._v("Generate i.i.d. Random Errors")])],1)]),s("div",{staticStyle:{height:"10px"}}),s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("Customize Error")])]),s("div",{staticStyle:{position:"relative"}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning"},on:{click:t.clear_error}},[t._v("Clear All Errors")]),s("div",{staticStyle:{height:"20px"}}),s("div",t._l(t.error_info,(function(e,r){return s("div",{key:r,style:{color:e[4]}},[t._v("\n\t\t\t\t\t\t"+t._s(e[3]+" error at t="+e[0]+", i="+e[1]+", j="+e[2])+"\n\t\t\t\t\t")])})),0),t.error_info.length>0?s("div",{staticStyle:{height:"20px"}}):t._e(),s("div",[s("div",{staticClass:"index"},[t._v("t")]),s("el-input-number",{attrs:{"controls-position":"right",min:0,max:6*t.T,size:"medium"},model:{value:t.target_t,callback:function(e){t.target_t=e},expression:"target_t"}}),s("div",{staticClass:"index"},[t._v("i")]),s("el-input-number",{attrs:{"controls-position":"right",min:0,max:2*t.L-2,size:"medium"},model:{value:t.target_i,callback:function(e){t.target_i=e},expression:"target_i"}}),s("div",{staticClass:"index"},[t._v("j")]),s("el-input-number",{attrs:{"controls-position":"right",min:0,max:2*t.L-2,size:"medium"},model:{value:t.target_j,callback:function(e){t.target_j=e},expression:"target_j"}})],1),s("div",{staticStyle:{height:"20px"}}),s("div",[s("el-button",{staticClass:"set-error-button",attrs:{type:"info",plain:0!=t.current_error},on:{click:function(e){return t.set_error(!1,!1)}}},[t._v("I")]),s("el-button",{staticClass:"set-error-button",attrs:{type:"success",plain:1!=t.current_error},on:{click:function(e){return t.set_error(!0,!1)}}},[t._v("X")]),s("el-button",{staticClass:"set-error-button",attrs:{type:"primary",plain:2!=t.current_error},on:{click:function(e){return t.set_error(!1,!0)}}},[t._v("Z")]),s("el-button",{staticClass:"set-error-button",attrs:{type:"danger",plain:3!=t.current_error},on:{click:function(e){return t.set_error(!0,!0)}}},[t._v("Y")])],1)],1)])],1)],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"text-align":"center"}},[r("h1",{staticClass:"title"},[r("img",{staticClass:"logo",attrs:{src:s("cf05")}}),t._v("QEC Playground")]),r("p",[t._v("This page is a visualization tool of fault-tolerant surface code. For tutorial and simpler case, visit "),r("a",{attrs:{href:"https://wuyue98.cn/QECPlayground/",target:"_blank"}},[t._v("QECPlayground")]),t._v(" instead.")])])}],i=(s("7f7f"),s("3835")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main",attrs:{id:"fault_tolerant_view_container"}})},h=[],c=(s("ac6a"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("6b54"),s("96cf"),s("1da1")),l=(s("c5f6"),s("5a89")),_=s("ef20"),u=s("4721");function p(t,e){var s;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(s=d(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,o=!1;return{s:function(){s=t[Symbol.iterator]()},n:function(){var t=s.next();return i=t.done,t},e:function(t){o=!0,a=t},f:function(){try{i||null==s.return||s.return()}finally{if(o)throw a}}}}function d(t,e){if(t){if("string"===typeof t)return f(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}function v(t,e){var s={};function r(t,e,s){Object.defineProperty(t,s,{set:function(){throw{name:"UnableRewriteException",message:"original cannot be rewrite"}},get:function(){return e[s]},enumerable:!0})}for(var n in t)r(s,t,n);return s}var g={name:"FaultTolerantView",props:{websiteRoot:{type:String,default:""},L:{type:Number,default:3},T:{type:Number,default:3},useRotated:{type:Boolean,default:!1},showDataQubit:{type:Boolean,default:!0},showXAncilla:{type:Boolean,default:!0},showZAncilla:{type:Boolean,default:!0},showVerticalLine:{type:Boolean,default:!0},showInitialization:{type:Boolean,default:!0},showCXGates:{type:Boolean,default:!0},showXEdges:{type:Boolean,default:!0},showZEdges:{type:Boolean,default:!0},usePerspectiveCamera:{type:Boolean,default:!0},panelWidth:{type:Number,default:480},errorModel:{type:String,default:"depolarizing"},depolarErrorRate:{type:Number,default:.001},dataQubitColor:{type:Object,default:function(){return new l["Color"](1,.65,0)}},enableStats:{type:Boolean,default:!0},enableBackground:{type:Boolean,default:!0}},data:function(){return{three:{},internals:{bias:{x:0,y:0,z:0}},snapshot:null,constants:null,show_data_qubit:!1,show_X_ancilla:!1,show_Z_ancilla:!1,show_vertical_line:!1,show_initialization:!1,show_CX_gates:!1,show_X_edges:!1,show_Z_edges:!1}},mounted:function(){var t=this;this.build_constants(),window.THREE=l,window.$ftview=this,this.show_data_qubit=this.showDataQubit,this.show_X_ancilla=this.showXAncilla,this.show_Z_ancilla=this.showZAncilla,this.show_vertical_line=this.showVerticalLine,this.show_initialization=this.showInitialization,this.show_CX_gates=this.showCXGates,this.show_X_edges=this.showXEdges,this.show_Z_edges=this.showZEdges;var e=new l["Scene"];this.three.scene=e,this.three.clock=new l["Clock"],this.three.clockAbs=new l["Clock"];var s=window.innerWidth-this.panelWidth,r=window.innerHeight;this.three.perspectiveCamera=new l["PerspectiveCamera"](75,s/window.innerHeight,.1,1e4),this.three.orthogonalCamera=new l["OrthographicCamera"](s/r*-3,s/r*3,3,-3,.1,1e4),this.update_camera(),this.usePerspectiveCamera?this.three.camera=this.three.perspectiveCamera:this.three.camera=this.three.orthogonalCamera;var n=new l["WebGLRenderer"]({antialias:!0});this.three.renderer=n,n.setPixelRatio(window.devicePixelRatio),n.setSize(s,r);var a=document.getElementById("fault_tolerant_view_container");this.three.orbitControlPerspective=new u["a"](this.three.perspectiveCamera,n.domElement),this.three.orbitControlOrthogonal=new u["a"](this.three.orthogonalCamera,n.domElement),this.three.orbitControl=this.three.orbitControlPerspective,a.appendChild(n.domElement),window.addEventListener("resize",function(){var e=window.innerWidth-t.panelWidth,s=window.innerHeight;t.three.orthogonalCamera.aspect=e/s,t.three.orthogonalCamera.updateProjectionMatrix(),t.three.perspectiveCamera.aspect=e/s,t.three.perspectiveCamera.updateProjectionMatrix(),n.setSize(e,s)}.bind(this),!1),this.three.pure_background=new l["Color"](16777215);var i=new l["CubeTextureLoader"],o=i.load([this.websiteRoot+"/px.jpg",this.websiteRoot+"/nx.jpg",this.websiteRoot+"/py.jpg",this.websiteRoot+"/ny.jpg",this.websiteRoot+"/pz.jpg",this.websiteRoot+"/nz.jpg"]);this.three.texture_background=o,this.enableBackground?e.background=this.three.texture_background:e.background=this.three.pure_background,this.enableStats&&(this.three.stats=new _["a"],a.appendChild(this.three.stats.dom)),this.create_static_resources(),this.useRotated?this.swap_snapshot(this.build_rotated_planar_code()):this.swap_snapshot(this.build_standard_planar_code_snapshot()),this.animate(),this.test()},methods:{test:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),show_nothing:function(){this.show_data_qubit=!1,this.show_X_ancilla=!1,this.show_Z_ancilla=!1,this.show_vertical_line=!1,this.show_initialization=!1,this.show_CX_gates=!1,this.show_X_edges=!1,this.show_Z_edges=!1},paper_figure_12_neighbors:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var s,r,n,a,o,h,c,_=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=[12,2,3],r=Object(i["a"])([[[12,2,1],[4,2,2],.0013983211195521077,14,[[2,1],[2,2],[2,3]]],[[12,2,5],[4,2,4],.0013983211195521077,14,[[2,3],[2,4],[2,5]]],[[12,0,3],[5,1,3],.0005997600320000002,6,[[0,3],[1,3],[2,3]]],[[12,4,3],[5,3,3],.0005997600320000002,6,[[2,3],[3,3],[4,3]]],[[6,2,3],[2,2,3],.0007995201279871998,8,[[2,3]]],[[18,2,3],[8,2,3],.0007995201279871998,8,[[2,3]]],[[6,0,3],[2,1,3],.0005997600320000002,6,[[0,3],[1,3],[2,3]]],[[6,2,1],[3,2,2],.00019999999999999985,2,[[2,1],[2,2],[2,3]]],[[6,0,5],[3,1,4],.00019999999999999985,2,[[0,5],[1,4],[1,5],[2,3],[2,4],[2,5]]],[[18,4,3],[8,3,3],.0005997600320000002,6,[[2,3],[3,3],[4,3]]],[[18,2,5],[9,2,4],.00019999999999999985,2,[[2,3],[2,4],[2,5]]],[[18,4,1],[9,3,2],.00019999999999999985,2,[[2,3],[3,2],[3,3],[4,1],[4,2],[4,3]]]][e||0],5),r[0],n=r[1],r[2],r[3],a=r[4],console.log(n),this.clear_errors(),this.snapshot[n[0]][n[1]][n[2]].error=this.constants.ETYPE.X,this.compute_propagated_error(),this.show_nothing(),t.next=9,this.vue_next_tick();case 9:return this.show_Z_ancilla=!0,this.show_X_ancilla=!0,this.show_CX_gates=!0,this.show_vertical_line=!0,this.show_data_qubit=!0,this.show_initialization=!0,t.next=17,this.vue_next_tick();case 17:this.iterate_snapshot((function(t,e,s,r){for(var n=0;n<a.length;++n){if(s==a[n][0]&&r==a[n][1])return;t.n_type!=_.constants.NTYPE.TARGET&&t.n_type!=_.constants.NTYPE.CONTROL||t.connection.i==a[n][0]&&t.connection.j==a[n][1]&&!0}t.vertical&&(t.vertical.visible=!1),_.visible_mesh(t,!1)})),this.use_orthogonal_camera(),this.three.orbitControl.target=this.snapshot[s[0]][s[1]][s[2]].mesh.position,this.three.camera.position.set(4.1205033934935,4.759126499802873,5.622697387749099),this.three.helper_plane||(o=new l["PlaneGeometry"](4,4,32),h=new l["MeshBasicMaterial"]({color:16776960,side:l["DoubleSide"],transparent:!0,opacity:.3}),this.three.helper_plane=new l["Mesh"](o,h),this.three.helper_plane.rotateX(Math.PI/2),c=this.position(12,2,3),this.three.helper_plane.position.set(c[0],c[1],c[2]),this.three.scene.add(this.three.helper_plane),this.three.scene.translateY(1));case 22:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),paper_figure_Z_stabilizer_connection:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.show_nothing(),t.next=3,this.vue_next_tick();case 3:this.show_Z_ancilla=!0,this.show_Z_edges=!0,this.three.scene.background=this.three.pure_background;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),paper_figure_single_error_two_syndrome:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.show_X_edges=!1,this.show_Z_edges=!1,this.snapshot[3][1][2].error=this.constants.ETYPE.X,this.compute_propagated_error();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sleep_ms:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,s){setTimeout((function(){t()}),e)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),vue_next_tick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t,s){e.$nextTick((function(){t()}))}.bind(this));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),visible_mesh:function(t,e){if(t.mesh)if(t.mesh instanceof Array){var s,r=p(t.mesh);try{for(r.s();!(s=r.n()).done;){var n=s.value;n.visible=e}}catch(a){r.e(a)}finally{r.f()}}else t.mesh.visible=e},use_pure_background:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.three.scene.background=t?this.three.pure_background:this.three.texture_background},use_orthogonal_camera:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.use_pure_background(!0),this.three.camera=this.three.orthogonalCamera,this.three.orbitControl=this.three.orbitControlOrthogonal):(this.use_pure_background(!1),this.three.camera=this.three.perspectiveCamera,this.three.orbitControl=this.three.orbitControlPerspective)},build_constants:function(){this.constants=v({QTYPE:v({DATA:0,X:1,Z:2}),NTYPE:v({INITIALIZATION:0,CONTROL:1,TARGET:2,MEASUREMENT:3,NONE:4,NONE_WITH_DATA_QUBIT:5}),ETYPE:v({I:0,X:1,Z:2,Y:3}),VERTICAL_INTERVAL:.333})},animate:function(){requestAnimationFrame(this.animate);this.three.clock.getDelta(),this.three.clockAbs.getElapsedTime();this.three.stats&&this.three.stats.update(),this.three.orbitControl.update(),this.three.renderer.render(this.three.scene,this.three.camera)},reset_snapshot:function(){var t=this;this.snapshot&&this.iterate_snapshot(function(e,s,r,n){if(e.mesh instanceof Array){var a,i=p(e.mesh);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.three.scene.remove(o),o.material.dispose()}}catch(_){i.e(_)}finally{i.f()}}else e.mesh&&(t.three.scene.remove(e.mesh),e.mesh.material.dispose());if(e.vertical&&(t.three.scene.remove(e.vertical),e.vertical.material.dispose()),e.edges){var h,c=p(e.edges);try{for(c.s();!(h=c.n()).done;){var l=h.value;t.three.scene.remove(l.mesh),l.mesh.material.dispose()}}catch(_){c.e(_)}finally{c.f()}}e.boundary&&e.boundary.mesh&&(t.three.scene.remove(e.boundary.mesh),e.boundary.mesh.material.dispose())}.bind(this)),this.snapshot=null},swap_snapshot:function(t){this.reset_snapshot(),this.snapshot=t,this.build_graph_given_error_rate(),this.establish_snapshot()},build_code_in_standard_planar_code:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e){return!0};console.assert(this.T>=1,"T should be at least 1, 1 is for perfect measurement condition");for(var e=2*this.L-1,s=6*this.T+1,r=[],n=0;n<s;++n){for(var a=[],i=0;i<e;++i){for(var o=[],h=0;h<e;++h)if(t(i,h)){var c=(n+6-1)%6,l=(i+h)%2==0,_=l?this.constants.QTYPE.DATA:i%2==0?this.constants.QTYPE.Z:this.constants.QTYPE.X,u=-1,p=null;switch(c){case 0:u=l?this.constants.NTYPE.NONE:this.constants.NTYPE.INITIALIZATION;break;case 1:l?i+1<e&&t(i+1,h)?(u=h%2==0?this.constants.NTYPE.TARGET:this.constants.NTYPE.CONTROL,p={i:i+1,j:h,t:n}):u=this.constants.NTYPE.NONE:i-1>=0&&t(i-1,h)?(u=h%2==0?this.constants.NTYPE.CONTROL:this.constants.NTYPE.TARGET,p={i:i-1,j:h,t:n}):u=this.constants.NTYPE.NONE;break;case 2:l?h+1<e&&t(i,h+1)?(u=i%2==0?this.constants.NTYPE.CONTROL:this.constants.NTYPE.TARGET,p={i:i,j:h+1,t:n}):u=this.constants.NTYPE.NONE:h-1>=0&&t(i,h-1)?(u=i%2==0?this.constants.NTYPE.TARGET:this.constants.NTYPE.CONTROL,p={i:i,j:h-1,t:n}):u=this.constants.NTYPE.NONE;break;case 3:l?h-1>=0&&t(i,h-1)?(u=i%2==0?this.constants.NTYPE.CONTROL:this.constants.NTYPE.TARGET,p={i:i,j:h-1,t:n}):u=this.constants.NTYPE.NONE:h+1<e&&t(i,h+1)?(u=i%2==0?this.constants.NTYPE.TARGET:this.constants.NTYPE.CONTROL,p={i:i,j:h+1,t:n}):u=this.constants.NTYPE.NONE;break;case 4:l?i-1>=0&&t(i-1,h)?(u=h%2==0?this.constants.NTYPE.TARGET:this.constants.NTYPE.CONTROL,p={i:i-1,j:h,t:n}):u=this.constants.NTYPE.NONE:i+1<e&&t(i+1,h)?(u=h%2==0?this.constants.NTYPE.CONTROL:this.constants.NTYPE.TARGET,p={i:i+1,j:h,t:n}):u=this.constants.NTYPE.NONE;break;case 5:u=l?this.constants.NTYPE.NONE_WITH_DATA_QUBIT:this.constants.NTYPE.MEASUREMENT;break}var d={t:n,i:i,j:h,connection:p,n_type:u,q_type:_,error:this.constants.ETYPE.I,propagated:this.constants.ETYPE.I};"depolarizing"==this.errorModel&&(d.error_rate_x=2*this.depolarErrorRate,d.error_rate_z=2*this.depolarErrorRate,d.error_rate_y=2*this.depolarErrorRate),o.push(d)}else o.push(null);a.push(o)}r.push(a)}return r},build_standard_planar_code_snapshot:function(){for(var t=this.build_code_in_standard_planar_code(),e=6;e<t.length;e+=6)for(var s=0;s<t[e].length;++s)for(var r=0;r<t[e][s].length;++r){var n=t[e][s][r];if(n&&n.n_type==this.constants.NTYPE.MEASUREMENT){var a=e,i=s,o=r;e==t.length-1?a+=6:(1==s&&(i-=2),s==t[e].length-2&&(i+=2),1==r&&(o-=2),r==t[e][s].length-2&&(o+=2)),i==s&&o==r&&a==e||(n.boundary={t:a,i:i,j:o})}}return t},build_rotated_planar_code:function(){this.L%2!=1&&(console.assert(!1,"L must be odd, add 1 to be odd"),this.L+=1);var t=this.L-1,e=this.constants;function s(s,r){var n=Math.abs(s-t)+Math.abs(r-t);if(n<=t)return!0;if((s+r)%2==0)return!1;var a=s%2==0?e.QTYPE.Z:e.QTYPE.X;return(a==e.QTYPE.Z&&(s-t)*(r-t)>0||a==e.QTYPE.X&&(s-t)*(r-t)<0)&&n<=t+1}for(var r=this.build_code_in_standard_planar_code(s),n=6;n<r.length;n+=6)for(var a=0;a<r[n].length;++a)for(var i=0;i<r[n][a].length;++i){var o=r[n][a][i];if(o&&o.n_type==this.constants.NTYPE.MEASUREMENT){var h=n,c=a,l=i,_=Math.abs(a-t)+Math.abs(i-t);if(n==r.length-1)h+=6;else if(_>=t-3){var u=a%2==0?this.constants.QTYPE.Z:this.constants.QTYPE.X;u==this.constants.QTYPE.Z?a>i?(c+=2,l-=2):(c-=2,l+=2):a+i>2*t?(c+=2,l+=2):(c-=2,l-=2)}c==a&&l==i&&h==n||(o.boundary={t:h,i:c,j:l})}}return r},error_multiply:function(t,e){return t==this.constants.ETYPE.I?e:e==this.constants.ETYPE.I?t:t==this.constants.ETYPE.X&&e==this.constants.ETYPE.X?this.constants.ETYPE.I:t==this.constants.ETYPE.X&&e==this.constants.ETYPE.Z?this.constants.ETYPE.Y:t==this.constants.ETYPE.X&&e==this.constants.ETYPE.Y?this.constants.ETYPE.Z:t==this.constants.ETYPE.Z&&e==this.constants.ETYPE.X?this.constants.ETYPE.Y:t==this.constants.ETYPE.Z&&e==this.constants.ETYPE.Z?this.constants.ETYPE.I:t==this.constants.ETYPE.Z&&e==this.constants.ETYPE.Y?this.constants.ETYPE.X:t==this.constants.ETYPE.Y&&e==this.constants.ETYPE.X?this.constants.ETYPE.Z:t==this.constants.ETYPE.Y&&e==this.constants.ETYPE.Z?this.constants.ETYPE.X:t==this.constants.ETYPE.Y&&e==this.constants.ETYPE.Y?this.constants.ETYPE.I:void 0},generate_random_error:function(){var t=this,e=0;return this.iterate_snapshot(function(s,r,n,a){var i=Math.random();i<s.error_rate_x?(s.error=t.constants.ETYPE.X,e+=1):i<s.error_rate_x+s.error_rate_z?(s.error=t.constants.ETYPE.Z,e+=1):i<s.error_rate_x+s.error_rate_z+s.error_rate_y?(s.error=t.constants.ETYPE.Y,e+=1):s.error=t.constants.ETYPE.I}.bind(this)),e},compute_propagated_error:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=1;e<this.snapshot.length;++e)for(var s=0;s<this.snapshot[e].length;++s)for(var r=0;r<this.snapshot[e][s].length;++r)this.snapshot[e][s][r]&&(this.snapshot[e][s][r].propagated=this.constants.ETYPE.I);for(var n=0;n<this.snapshot.length-1;++n)for(var a=0;a<this.snapshot[n].length;++a)for(var i=0;i<this.snapshot[n][a].length;++i){var o=this.snapshot[n][a][i];if(o){var h=this.error_multiply(o.error,o.propagated);if(this.snapshot[n+1][a][i].propagated=this.error_multiply(h,this.snapshot[n+1][a][i].propagated),o.n_type==this.constants.NTYPE.INITIALIZATION&&(this.snapshot[n+1][a][i].propagated=this.constants.ETYPE.I),o.n_type==this.constants.NTYPE.CONTROL&&(o.propagated==this.constants.ETYPE.X||o.propagated==this.constants.ETYPE.Y)){var c=this.snapshot[n+1][o.connection.i][o.connection.j];c.propagated=this.error_multiply(this.constants.ETYPE.X,c.propagated)}if(o.n_type==this.constants.NTYPE.TARGET&&(o.propagated==this.constants.ETYPE.Z||o.propagated==this.constants.ETYPE.Y)){var l=this.snapshot[n+1][o.connection.i][o.connection.j];l.propagated=this.error_multiply(this.constants.ETYPE.Z,l.propagated)}}}if(t)for(var _=1;_<this.snapshot.length;++_)for(var u=0;u<this.snapshot[_].length;++u)for(var p=0;p<this.snapshot[_][u].length;++p){var d=this.snapshot[_][u][p];if(d){if(d.n_type==this.constants.NTYPE.MEASUREMENT)if(d.q_type==this.constants.QTYPE.Z){var f=d.propagated==this.constants.ETYPE.I||d.propagated==this.constants.ETYPE.Z,v=this.snapshot[_-6][u][p],g=v.propagated==this.constants.ETYPE.I||v.propagated==this.constants.ETYPE.Z;d.mesh.material.color=f!=g?this.three.measurement_node_color_error:this.three.initialization_node_color_Z}else{var m=d.propagated==this.constants.ETYPE.I||d.propagated==this.constants.ETYPE.X,w=this.snapshot[_-6][u][p],E=w.propagated==this.constants.ETYPE.I||w.propagated==this.constants.ETYPE.X;d.mesh.material.color=m!=E?this.three.measurement_node_color_error:this.three.initialization_node_color_X}if(_>0){var b=this.snapshot[_][u][p].vertical;d.propagated==this.constants.ETYPE.I?b.material.color=this.three.vertical_line_color:b.material.color=this.three.measurement_node_color_error}}}},position_middle_set_bias:function(){for(var t=this.position(0,0,0),e=Object(i["a"])(t,3),s=e[0],r=e[1],n=e[2],a=[s,r,n],o=[s,r,n],h=[[this.snapshot.length-1,0,0],[0,this.snapshot[0].length-1,0],[0,0,this.snapshot[0][0].length-1]],c=0,l=h;c<l.length;c++)for(var _=l[c],u=this.position(_[0],_[1],_[2]),p=0;p<3;++p)u[p]<a[p]&&(a[p]=u[p]),u[p]>o[p]&&(o[p]=u[p]);this.internals.bias.x=-.5*(o[0]-a[0]),this.internals.bias.y=-.5*(o[1]-a[1]),this.internals.bias.z=-.5*(o[2]-a[2])},no_bias_position:function(t,e,s){return[s,t*this.constants.VERTICAL_INTERVAL,e]},position:function(t,e,s){var r=this.no_bias_position(t,e,s),n=Object(i["a"])(r,3),a=n[0],o=n[1],h=n[2];return[a+this.internals.bias.x,o+this.internals.bias.y,h+this.internals.bias.z]},create_static_resources:function(){this.three.default_sphere=new l["SphereBufferGeometry"](.2,48,24),this.three.initialization_node_geometry=new l["ConeBufferGeometry"](.1,.15,32),this.three.initialization_node_color_Z=new l["Color"](0,.75,1),this.three.initialization_node_color_X=new l["Color"](0,.8,0);var t=.15;this.three.measurement_node_geometry=new l["SphereBufferGeometry"](t,48,24),this.three.measurement_node_color_Z=new l["Color"](0,.75,1),this.three.measurement_node_color_X=new l["Color"](0,.8,0),this.three.measurement_node_color_error=new l["Color"]("red"),this.three.data_node_geometry=new l["SphereBufferGeometry"](t,48,24),this.three.data_node_color=new l["Color"](1,.65,0);var e=.02;this.three.vertical_line_geometry=new l["CylinderBufferGeometry"](e,e,this.constants.VERTICAL_INTERVAL,6),this.three.vertical_line_geometry.translate(0,-.5*this.constants.VERTICAL_INTERVAL,0),this.three.vertical_line_color=new l["Color"]("black");var s=.15,r=.005;this.three.CX_target_geometries=[new l["TorusBufferGeometry"](s,r,16,32),new l["CylinderBufferGeometry"](r,r,2*s,6),new l["CylinderBufferGeometry"](r,r,2*s,6)],this.three.CX_target_geometries[0].rotateX(Math.PI/2),this.three.CX_target_geometries[1].rotateX(Math.PI/2),this.three.CX_target_geometries[2].rotateZ(Math.PI/2),this.three.CX_target_color=new l["Color"]("black"),this.three.CX_link_geometry=new l["CylinderBufferGeometry"](r,r,1,6),this.three.CX_link_geometry.translate(0,.5,0),this.three.CX_link_color=new l["Color"]("black"),this.three.CX_control_geometry=new l["SphereBufferGeometry"](.03,12,6),this.three.CX_control_color=new l["Color"]("black");var n=.05;this.three.edge_geometry=new l["CylinderBufferGeometry"](n,n,1,6),this.three.edge_geometry.translate(0,.5,0),this.three.edge_color=new l["Color"]("black")},establish_snapshot:function(){this.position_middle_set_bias();for(var t=0;t<this.snapshot.length;++t)for(var e=0;e<this.snapshot[t].length;++e)for(var s=0;s<this.snapshot[t][e].length;++s){var r=this.snapshot[t][e][s];if(null!=r){var n=this.position(t,e,s),a=Object(i["a"])(n,3),o=a[0],h=a[1],c=a[2];if(r.n_type==this.constants.NTYPE.INITIALIZATION){var _=r.q_type==this.constants.QTYPE.Z?this.three.initialization_node_color_Z:this.three.initialization_node_color_X;r.mesh=new l["Mesh"](this.three.initialization_node_geometry,new l["MeshBasicMaterial"]({color:_})),r.mesh.visible=this.show_initialization,r.mesh.position.set(o,h,c),this.three.scene.add(r.mesh)}if(r.n_type==this.constants.NTYPE.MEASUREMENT){var u=r.q_type==this.constants.QTYPE.Z?this.three.measurement_node_color_Z:this.three.measurement_node_color_X;r.mesh=new l["Mesh"](this.three.measurement_node_geometry,new l["MeshBasicMaterial"]({color:u,envMap:this.three.texture_background,reflectivity:.5})),r.mesh.visible=r.q_type==this.constants.QTYPE.Z?this.show_Z_ancilla:this.show_X_ancilla,r.mesh.position.set(o,h,c),this.three.scene.add(r.mesh)}if(r.n_type==this.constants.NTYPE.NONE_WITH_DATA_QUBIT&&(r.mesh=new l["Mesh"](this.three.data_node_geometry,new l["MeshBasicMaterial"]({color:this.three.data_node_color,envMap:this.three.texture_background,reflectivity:.5})),r.mesh.visible=this.show_data_qubit,r.mesh.position.set(o,h,c),this.three.scene.add(r.mesh)),r.n_type==this.constants.NTYPE.TARGET){r.mesh=[];for(var d=0;d<this.three.CX_target_geometries.length;++d){var f=this.three.CX_target_geometries[d],v=new l["Mesh"](f,new l["MeshBasicMaterial"]({color:this.three.CX_target_color}));r.mesh.push(v),v.visible=this.show_CX_gates,v.position.set(o,h,c),this.three.scene.add(v)}var g=new l["Mesh"](this.three.CX_link_geometry,new l["MeshBasicMaterial"]({color:this.three.CX_link_color}));r.connection.i==e+1&&g.rotateX(Math.PI/2),r.connection.i==e-1&&g.rotateX(-Math.PI/2),r.connection.j==s+1&&g.rotateZ(-Math.PI/2),r.connection.j==s-1&&g.rotateZ(Math.PI/2),g.visible=this.show_CX_gates,r.mesh.push(g),g.position.set(o,h,c),this.three.scene.add(g)}r.n_type==this.constants.NTYPE.CONTROL&&(r.mesh=new l["Mesh"](this.three.CX_control_geometry,new l["MeshBasicMaterial"]({color:this.three.CX_control_color})),r.mesh.visible=this.show_CX_gates,r.mesh.position.set(o,h,c),this.three.scene.add(r.mesh)),t>0&&(r.vertical=new l["Mesh"](this.three.vertical_line_geometry,new l["MeshBasicMaterial"]({color:this.three.vertical_line_color})),r.vertical.visible=this.show_vertical_line,r.vertical.position.set(o,h,c),this.three.scene.add(r.vertical));var m=function(t,e,s,r,n,a,o){var h=new l["Mesh"](this.three.edge_geometry,new l["MeshBasicMaterial"]({color:this.three.edge_color})),c=this.position(t,e,s),_=Object(i["a"])(c,3),u=_[0],p=_[1],d=_[2];h.position.set(u,p,d);var f=this.no_bias_position(t-r,e-n,s-a),v=Object(i["a"])(f,3),g=v[0],m=v[1],w=v[2],E=Math.sqrt(g*g+m*m+w*w),b=1;h.scale.set(b,E/2,b);var T=new l["Vector3"](1,0,0),y=0;if(n==e&&a==s)r<t&&(y=Math.PI);else{var P=1/Math.sqrt(w*w+g*g);T=new l["Vector3"](w*P,0,-g*P),y=-Math.atan2(Math.sqrt(g*g+w*w),m),y<0&&(y=Math.PI-y)}return h.rotateOnAxis(T,y),h}.bind(this);if(r.edges){var w,E=p(r.edges);try{for(E.s();!(w=E.n()).done;){var b=w.value;b.mesh=m(t,e,s,b.t,b.i,b.j,b.p),r.q_type!=this.constants.QTYPE.X||this.show_X_edges||(b.mesh.visible=!1),r.q_type!=this.constants.QTYPE.Z||this.show_Z_edges||(b.mesh.visible=!1),this.three.scene.add(b.mesh)}}catch(T){E.e(T)}finally{E.f()}}r.boundary&&void 0!=r.boundary.p&&(r.boundary.mesh=m(t,e,s,r.boundary.t,r.boundary.i,r.boundary.j,r.boundary.p),r.q_type!=this.constants.QTYPE.X||this.show_X_edges||(r.boundary.mesh.visible=!1),r.q_type!=this.constants.QTYPE.Z||this.show_Z_edges||(r.boundary.mesh.visible=!1),this.three.scene.add(r.boundary.mesh))}}},build_graph_given_error_rate:function(){function t(e,s,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];void 0==e.edges&&(e.edges=[]);for(var a=!1,i=0;i<e.edges.length;++i){var o=e.edges[i];if(o.t==s.t&&o.i==s.i&&o.j==s.j){a=!0,o.p=o.p*(1-r)+r*(1-o.p);break}}0==a&&e.edges.push({t:s.t,i:s.i,j:s.j,p:r}),n&&t(s,e,r,!1)}for(var e=0;e<this.snapshot.length-1;++e)for(var s=0;s<this.snapshot[e].length;++s)for(var r=0;r<this.snapshot[e][s].length;++r)for(var n=0;n<2;++n)if(this.snapshot[e][s][r]){this.clear_errors(),this.snapshot[e][s][r].error=0==n?this.constants.ETYPE.X:this.constants.ETYPE.Z;var a=(0==n?this.snapshot[e][s][r].error_rate_x:this.snapshot[e][s][r].error_rate_z)+this.snapshot[e][s][r].error_rate_y;this.compute_propagated_error(!1);var o=this.get_error_syndrome_propagated();if(1==o.length){var h=Object(i["a"])(o[0],3),c=h[0],l=h[1],_=h[2],u=this.snapshot[c][l][_].boundary;console.assert(u,"there must be boundary on [".concat(c,"][").concat(l,"][").concat(_,"]")),void 0==u.p&&(u.p=0),u.p=u.p*(1-a)+a*(1-u.p)}else if(2==o.length){var p=this.snapshot[o[0][0]][o[0][1]][o[0][2]],d=this.snapshot[o[1][0]][o[1][1]][o[1][2]];t(p,d,a)}}this.clear_errors()},clear_errors:function(){for(var t=0;t<this.snapshot.length;++t)for(var e=0;e<this.snapshot[t].length;++e)for(var s=0;s<this.snapshot[t][e].length;++s){var r=this.snapshot[t][e][s];r&&(r.error=this.constants.ETYPE.I)}},get_error_syndrome_propagated:function(){for(var t=[],e=6;e<this.snapshot.length;e+=6)for(var s=0;s<this.snapshot[e].length;++s)for(var r=0;r<this.snapshot[e][s].length;++r){var n=this.snapshot[e][s][r];if(n&&n.n_type==this.constants.NTYPE.MEASUREMENT)if(n.q_type==this.constants.QTYPE.Z){var a=n.propagated==this.constants.ETYPE.I||n.propagated==this.constants.ETYPE.Z,i=this.snapshot[e-6][s][r],o=i.propagated==this.constants.ETYPE.I||i.propagated==this.constants.ETYPE.Z;a!=o&&t.push([e,s,r])}else{var h=n.propagated==this.constants.ETYPE.I||n.propagated==this.constants.ETYPE.X,c=this.snapshot[e-6][s][r],l=c.propagated==this.constants.ETYPE.I||c.propagated==this.constants.ETYPE.X;h!=l&&t.push([e,s,r])}}return t},count_error_syndrome_propagated:function(){return this.get_error_syndrome_propagated().length},verify_idea_all_single_error_only_has_at_most_two_syndrome:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,s,r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.snapshot.length-1)){t.next=30;break}s=0;case 3:if(!(s<this.snapshot[e].length)){t.next=27;break}r=0;case 5:if(!(r<this.snapshot[e][s].length)){t.next=24;break}n=0;case 7:if(!(n<2)){t.next=21;break}if(this.snapshot[e][s][r]){t.next=10;break}return t.abrupt("continue",18);case 10:if(this.clear_errors(),this.snapshot[e][s][r].error=0==n?this.constants.ETYPE.X:this.constants.ETYPE.Z,this.compute_propagated_error(),a=this.count_error_syndrome_propagated(),!(a>2)){t.next=18;break}return console.log("find error syndrome count = "+a),console.log("error at [".concat(e,"][").concat(s,"][").concat(r,"]")),t.abrupt("return");case 18:++n,t.next=7;break;case 21:++r,t.next=5;break;case 24:++s,t.next=3;break;case 27:++e,t.next=1;break;case 30:this.clear_errors(),this.compute_propagated_error(),console.log("verified: all single error only has at most two syndrome");case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),verify_idea_at_most_12_neighbour_in_graph:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.iterate_snapshot((function(t,e,s,r){t.edges&&console.assert(t.edges.length<=12,"find [".concat(e,"][").concat(s,"][").concat(r,"] has ").concat(t.edges.length," edges, greater than 12"))})),console.log("verified: at most 12 neighbour in graph");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),iterate_snapshot:function(t){for(var e=0;e<this.snapshot.length;++e)for(var s=0;s<this.snapshot[e].length;++s)for(var r=0;r<this.snapshot[e][s].length;++r)this.snapshot[e][s][r]&&t(this.snapshot[e][s][r],e,s,r)},get_snapshot_node:function(t,e,s){if(t>=0&&t<this.snapshot.length&&e>=0&&e<this.snapshot[t].length&&s>=0&&s<this.snapshot[t][e].length)return this.snapshot[t][e][s]},regenerate_everything:function(){this.useRotated?this.swap_snapshot(this.build_rotated_planar_code()):this.swap_snapshot(this.build_standard_planar_code_snapshot()),this.update_camera()},update_camera:function(){var t=.8*this.L;this.three.orthogonalCamera.position.set(-6*t,3*t,3*t),this.three.orthogonalCamera.lookAt(this.three.scene.position),this.three.orthogonalCamera.updateMatrix(),this.three.perspectiveCamera.position.set(-2*t,1*t,1*t),this.three.perspectiveCamera.lookAt(this.three.scene.position),this.three.perspectiveCamera.updateMatrix()}},watch:{L:function(){this.regenerate_everything()},T:function(){this.regenerate_everything()},useRotated:function(){this.regenerate_everything()},usePerspectiveCamera:function(){this.use_orthogonal_camera(!this.usePerspectiveCamera)},show_data_qubit:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){s.n_type==e.constants.NTYPE.NONE_WITH_DATA_QUBIT&&(s.mesh.visible=t)}))},show_X_ancilla:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){s.n_type==e.constants.NTYPE.MEASUREMENT&&s.q_type==e.constants.QTYPE.X&&(s.mesh.visible=t)}))},show_Z_ancilla:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){s.n_type==e.constants.NTYPE.MEASUREMENT&&s.q_type==e.constants.QTYPE.Z&&(s.mesh.visible=t)}))},show_vertical_line:function(t){this.iterate_snapshot((function(e,s,r,n){e.vertical&&(e.vertical.visible=t)}))},show_initialization:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){s.n_type==e.constants.NTYPE.INITIALIZATION&&(s.mesh.visible=t)}))},show_CX_gates:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){if(s.n_type==e.constants.NTYPE.TARGET){var i,o=p(s.mesh);try{for(o.s();!(i=o.n()).done;){var h=i.value;h.visible=t}}catch(c){o.e(c)}finally{o.f()}}s.n_type==e.constants.NTYPE.CONTROL&&(s.mesh.visible=t)}))},show_X_edges:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){if(s.q_type==e.constants.QTYPE.X){if(s.edges){var i,o=p(s.edges);try{for(o.s();!(i=o.n()).done;){var h=i.value;h.mesh.visible=t}}catch(c){o.e(c)}finally{o.f()}}s.boundary&&s.boundary.mesh&&(s.boundary.mesh.visible=t)}}))},show_Z_edges:function(t){var e=this;this.iterate_snapshot((function(s,r,n,a){if(s.q_type==e.constants.QTYPE.Z){if(s.edges){var i,o=p(s.edges);try{for(o.s();!(i=o.n()).done;){var h=i.value;h.mesh.visible=t}}catch(c){o.e(c)}finally{o.f()}}s.boundary&&s.boundary.mesh&&(s.boundary.mesh.visible=t)}}))},showDataQubit:function(t){this.show_data_qubit=t},showXAncilla:function(t){this.show_X_ancilla=t},showZAncilla:function(t){this.show_Z_ancilla=t},showVerticalLine:function(t){this.show_vertical_line=t},showInitialization:function(t){this.show_initialization=t},showCXGates:function(t){this.show_CX_gates=t},showXEdges:function(t){this.show_X_edges=t},showZEdges:function(t){this.show_Z_edges=t}}},m=g,w=(s("75ff"),s("2877")),E=Object(w["a"])(m,o,h,!1,null,"c6e9dd98",null),b=E.exports,T=!0,y={name:"app",components:{FaultTolerantView:b},data:function(){return{deploy_mode:T,L:3,T:3,use_rotated:!1,bufferedL:1,show_data_qubit:!0,show_X_ancilla:!0,show_Z_ancilla:!0,show_vertical_line:!0,show_initialization:!0,show_CX_gates:!0,show_X_edges:!1,show_Z_edges:!1,use_perspective_camera:!0,target_t:0,target_i:0,target_j:0,error_rate_x:"1e-3",error_rate_z:"1e-3",error_rate_y:"1e-3",current_error:null,error_info:[]}},computed:{enableStats:function(){return!T},decoderServerRootUrl:function(){return T?"/api/qecp/":"http://127.0.0.1:8066/"},websiteRoot:function(){return T?"/FT-QECPlayground":""}},mounted:function(){window.$app=this,this.bufferedL=this.L},methods:{set_error:function(t,e){var s=this.$refs.ft_view,r=s.get_snapshot_node(this.target_t,this.target_i,this.target_j);r?(r.error=t?e?s.constants.ETYPE.Y:s.constants.ETYPE.X:e?s.constants.ETYPE.Z:s.constants.ETYPE.I,s.compute_propagated_error(),this.update_error_information()):this.$notify.error({title:"Set Error Failed",message:"Node at [".concat(this.target_t,"][").concat(this.target_i,"][").concat(this.target_j,"] doesn't exist.")})},clear_error:function(){var t=this.$refs.ft_view;t.iterate_snapshot((function(e,s,r,n){e.error=t.constants.ETYPE.I})),t.compute_propagated_error(),this.update_error_information()},generate_random_error:function(){var t=this.$refs.ft_view,e=this.get_error_rates(),s=Object(i["a"])(e,3),r=s[0],n=s[1],a=s[2];t.iterate_snapshot((function(t,e,s,i){t.error_rate_x=r,t.error_rate_z=n,t.error_rate_y=a})),t.generate_random_error(),t.compute_propagated_error(),this.update_error_information()},get_error_rates:function(){function t(t,e){var s=parseFloat(t[e]);return s<=1&&s>=0?s:(t[e]="0",0)}var e=t(this,"error_rate_x"),s=t(this,"error_rate_z"),r=t(this,"error_rate_y");return e+s+r>1?(this.$notify.error({title:"Invalid Error Rate",message:"The sum of error rate probabilities should not exceed 1, now it's ".concat(e+s+r,".")}),[0,0,0]):[e,s,r]},update_error_information:function(){var t=this.$refs.ft_view,e=[];t.iterate_snapshot((function(s,r,n,a){if(s.error!=t.constants.ETYPE.I){var i="I",o="black";s.error==t.constants.ETYPE.X&&(i="X",o="#85ce61"),s.error==t.constants.ETYPE.Z&&(i="Z",o="#409EFF"),s.error==t.constants.ETYPE.Y&&(i="Y",o="#F56C6C"),e.push([r,n,a,i,o])}})),this.error_info=e,this.target_t_i_j_updated()},target_t_i_j_updated:function(){var t=this.$refs.ft_view,e=t.get_snapshot_node(this.target_t,this.target_i,this.target_j);this.current_error=e?e.error:null}},watch:{target_t:function(){this.target_t_i_j_updated()},target_i:function(){this.target_t_i_j_updated()},target_j:function(){this.target_t_i_j_updated()},bufferedL:function(t,e){t<=0?this.bufferedL=1:this.use_rotated&&(this.bufferedL=t<e?2*Math.floor((t-1)/2)+1:2*Math.ceil((t-1)/2)+1),this.L=this.bufferedL},use_rotated:function(t){t&&this.bufferedL%2==0&&(this.bufferedL=this.bufferedL+1),this.L=this.bufferedL}}},P=y,Y=(s("034f"),Object(w["a"])(P,n,a,!1,null,null,null)),C=Y.exports,x=s("5c96"),X=s.n(x),N=(s("0fae"),s("b2d6")),k=s.n(N);r["default"].use(X.a,{locale:k.a});var M=!1,Z=function(){window.MathJax&&(window.MathJax.Hub.Config({showProcessingMessages:!1,messageStyle:"none",jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],skipTags:["script","noscript","style","textarea","pre","code","a"]},"HTML-CSS":{availableFonts:["STIX","TeX"],showMathMenu:!1}}),M=!0)},I=function(t){window.MathJax&&(M||Z(),window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,document.getElementById(t)]))},R={isMathjaxConfig:M,initMathjaxConfig:Z,MathQueue:I};r["default"].config.productionTip=!1,r["default"].use(X.a),r["default"].prototype.MathjaxConfig=R,new r["default"]({render:function(t){return t(C)}}).$mount("#app")},"64a9":function(t,e,s){},"75ff":function(t,e,s){"use strict";s("782a")},"782a":function(t,e,s){},cf05:function(t,e,s){t.exports=s.p+"img/logo.e39bfe01.png"}});
//# sourceMappingURL=app.48620d12.js.map